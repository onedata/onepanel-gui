<div class="row content-row header-row {{unless nextStep "hidden-xs"}}">
  <h1 class="title-header with-menu">
    <span class="one-label">{{tt this "storages"}}</span>
    {{#if (gt paginator.pagesCount 1)}}
      {{pages-control
        activePageNumber=paginator.activePageNumber
        pagesCount=paginator.pagesCount
        pageSize=paginator.pageSize
        onPageChange=paginator.changeActivePageNumber
      }}
    {{/if}}
    {{actions-toolbar minimumFullWindowSize=0 actionsArray=globalActions}}
  </h1>
</div>
<div class="row content-row row-medium {{unless addStorageOpened "row-hidden"}}">
  <h1 class="form-title">{{tt this "addNewStorage"}}</h1>
    {{cluster-storage-add-form
      class="col-xs-12 col-sm-10 col-md-8 col-lg-6 col-centered"
      submit=(action "submitAddStorage")
      isFormOpened=addStorageOpened
      selectedStorageType=createStorageFormType}}
</div>
<div class="row {{if dataIsLoading "min-height-100"}}">
  {{#loading-container
    isLoading=dataIsLoading
    errorReason=(or storagesError spacesProxy.reason)
    loadingLabel=(tt this "loadingStorages")
  }}
    {{#unless noStorages}}
      {{cluster-storage-table
        storages=paginator.activePageArray
        spaces=spacesProxy.content
        submitModifyStorage=(action "submitModifyStorage")
        removeStorage=(action (mut storageToRemove))
      }}
      {{#if someStorageIsLoading}}
        <div class="loading-more-row">
          {{spin-spinner-block sizeClass="sm" class="fill-middle-centered"}}
        </div>
      {{/if}}
      {{#if (gt paginator.pagesCount 1)}}
        {{pages-control
          class="bottom-pages-control"
          activePageNumber=paginator.activePageNumber
          pagesCount=paginator.pagesCount
          pageSize=paginator.pageSize
          onPageChange=paginator.changeActivePageNumber
        }}
      {{/if}}
    {{/unless}}
  {{/loading-container}}
</div>
{{proceed-process-modal
  opened=storageToRemove
  processing=isRemovingStorage
  close=(action (mut storageToRemove) null)
  proceed=(action "submitRemoveStorage")
  modalClass="remove-storage-modal"
  modalIcon="sign-warning-rounded"
  headerText=(tt this "removeStorageModalHeader")
  messageText=(tt this "removeStorageModalMessage" name=storageToRemove.name)
  proceedButtonText=(tt this "remove")}}
