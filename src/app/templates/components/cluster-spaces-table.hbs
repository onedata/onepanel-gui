{{#if anySpaceRejected}}
  {{resource-load-error
    class="alert-some-spaces-rejected"
    message=(tt this "components.clusterSpacesTable.someLoadError")
    onClose=(action "closeRejectedError")
  }}
{{/if}}

{{#one-collapsible-list as |list|}}
  {{#each spacesSorted as |spaceProxy|}}
    {{!-- TODO: change to links, because we want to open in separate tabs --}}
    {{#unless spaceProxy.isRejected}}
      {{#list.item toggle=(action "spaceClicked" listItem) as |listItem|}}
        {{#listItem.header
          isCollapsible=false
          click=(action "spaceClicked" spaceProxy.content.id)
          class="hoverable"
        }}
          {{#if spaceProxy.isPending}}
            {{spin-spinner-block sizeClass="xs" class="absolute-middle-centered"}}
          {{else if spaceProxy.isFulfilled}}
            {{cluster-spaces-table-item
              space=spaceProxy.content
              provider=provider
              startRevokeSpace=(action "startRevokeSpace")
            }}
          {{/if}}
        {{/listItem.header}}
      {{/list.item}}
    {{/unless}}
  {{/each}}
{{/one-collapsible-list}}
