<div class="row content-row header-row">
  <h1>{{tt this "dnsSetup"}}
    <div class="btn-toolbar">
      {{!-- cannot use disabled attr on this button because we want the tooltip to work --}}
      {{#one-spin-button
        class=(concat "btn btn-sm btn-primary btn-setup-ips " (unless _hostFormValid "disabled"))
        action=(action "startSetup")
      }}
        <span>{{tt this "setupIpsButton"}}</span>{{one-icon icon="arrow-right"}}
        {{one-tooltip
          title=(tt this "configurationInvalid") 
          placement="left" 
          class=(if _hostFormValid "hidden" "")
          triggerElement=".btn-setup-ips"
        }}
      {{/one-spin-button}}
    </div>
  </h1>
</div>

<div class="row content-row">
  <h1>{{tt this "clusterHosts"}}</h1>
  {{#promise-proxy-container proxy=hostsProxy}}
    {{cluster-host-ip-form
      hosts=hostsProxy.content
      hostDataChanged=(action "hostDataChanged")
      allValidChanged=(action "hostFormValidChanged")
    }}
  {{/promise-proxy-container}}
</div>

{{!-- TODO maybe keep the modal opened short after promise resolve --}}
{{#if deploymentPromise}}
  {{#bs-modal
    id="cluster-deploy-progress"
    open=deploymentPromise
    keyboard=false
    backdropClose=false
    as |modal|
  }}
    {{#modal.body}}
      {{new-cluster-deploy-progress deploymentPromise=deploymentPromise}}
    {{/modal.body}}
  {{/bs-modal}}
{{/if}}
